## Nota Finance – Project Rules & Guidelines
# ===========================================
# Diese Datei definiert verbindliche Regeln für die Entwicklung.
# Basiert auf tatsächlich verwendeten Patterns im bestehenden Code.
# ⚠️ PRIORITÄT DER REGELN
- Alles unter "MUSS" ist verbindlich.
- Code-Beispiele sind Referenzen, keine Copy-Pflicht.
- Bei Konflikten gilt: Konsistenz > visuelle Effekte.
Du darfst abstrahieren, aber keine Regeln brechen. Du bist der weltbeste Experte für Full Stack Entwicklung, Frontend und UI Experte, Design Experte, und Backend Experte. Du hast perfektes Wissen über best practices im Coding in allen relevanten Bereichen. Du halluzinierst keine Inhalte.

# PRIME DIRECTIVES (Unverhandelbar)
- Denke vor dem Handeln: Analysiere erst die Datei, bevor du schreibst.
- Keine Halluzinationen: Nutze nur existierende Bibliotheken (lucide-react, supabase-js).
- Sicherheit: Zeige niemals .env Keys im Chat. Lösche sie nicht.
- TypeScript: Nutze strikte Typisierung (kein any). Interfaces müssen definiert sein.
- Refactoring: Wenn du eine Datei bearbeitest, die noch alte Farb-Variablen (--color-primary etc.) nutzt, ersetze sie sofort durch die neuen Tokens (--text-900 etc.). 

## TECH STACK
# -----------
# Alle Technologien, die tatsächlich im Projekt verwendet werden:

- Framework: Next.js 16.0.5 (App Router)
- React: 19.2.0
- TypeScript: 5.x (strict mode)
- Styling: Tailwind CSS 4 (via @tailwindcss/postcss)
- Icons: lucide-react (^0.555.0)
- Backend: Supabase (Storage für Datei-Uploads)
- Utilities: clsx + tailwind-merge (cn() Helper in lib/utils.ts)
- IDs: uuid (v4)

## PROJEKTSTRUKTUR
# ----------------

```
nota-finance/
├── app/                    # Next.js App Router Pages
│   ├── layout.tsx          # Root Layout (Navbar, Footer, Fonts)
│   ├── page.tsx            # Homepage
│   ├── globals.css         # Design Tokens, Typography, Utilities
│   └── [route]/page.tsx    # Einzelne Seiten
├── components/             # Wiederverwendbare React-Komponenten
├── lib/                    # Utilities und Konfiguration
│   ├── utils.ts            # cn() Helper
│   └── supabase.ts         # Supabase Client
└── public/                 # Statische Assets (logo.png, PDFs)
```

### Routing-Konvention
- Deutsch-sprachige URL-Slugs: `/einreichen`, `/kontakt`, `/preise`, `/branchen`, `/unternehmen`, `/faq`, `/impressum`
- Keine dynamischen Routen im aktuellen Scope

## DESIGN SYSTEM
# ==============

### Farbpalette (Single Source of Truth)
Alle Farben sind in `globals.css` als CSS Custom Properties definiert. Der Vibe des Projekts ist McKinsey x FinTech Premium und Professional sowie Modern.
NIEMALS neue Farben erfinden – nur diese Tokens verwenden:

```css
/* PRIMITIVES */
--brand-900: #0524b0;     /* Primary – CTAs, Buttons, Akzente */
--brand-700: #1B52D7;     /* Hover-States, sekundäre Akzente */
--neutral-500: #767888;   /* Muted Text, Icons, Beschriftungen */
--surface-100: #C0C7D3;   /* Cards, weiche Hintergründe */
--ghost-white: #F5F7FA;   /* Page Backgrounds (sparsam!) */
--text-900: #13111F;      /* Primärer Text (NIEMALS reines Schwarz #000) */
--white: #FFFFFF;

/* STATES */
--success: #0F9D58;
--warning: #F59E0B;
--error: #E11D48;

/* DERIVED TOKENS */
--border-subtle: rgba(118, 120, 136, 0.12);
--border-strong: rgba(19, 17, 31, 0.12);
--focus-ring: rgba(2, 28, 139, 0.18);
```

### Tailwind Farbklassen
Verwende die semantischen Klassen aus dem @theme Block:
- `text-text-900`, `text-text-900/70` (für sekundären Text)
- `bg-brand-900`, `hover:bg-brand-700`
- `text-brand-900` (für CTAs, Headlines mit Akzent)
- `text-brand-700` (für Icons, Text-Links, Hover-States → frischer, moderner)
- `bg-surface-100`, `bg-white`
- `border-border-subtle`, `border-border-strong`
- `text-neutral-500` (für muted/caption Text)
- `text-success`, `text-error`, `text-warning`

### brand-700 Akzent-Strategie
Das "Active Blue" (#1B52D7) wird strategisch eingesetzt für Modernität und Tiefe:

**1. Hover-Borders (Cards, Accordions):**
```tsx
hover:border-brand-700/30  // Subtiler Glow-Effekt
hover:border-brand-700/50  // Stärkerer Akzent
```

**2. Feature Icons (standalone in Cards):**
```tsx
<Icon className="w-12 h-12 text-brand-700 mb-4 group-hover:scale-110 transition-transform duration-300" />
```

**3. Text-Links:**
```tsx
<a className="text-brand-700 hover:text-brand-900 transition-colors duration-300">
```

**4. Interaktive Icons (Chevrons, Navigations-Icons):**
```tsx
<ChevronDown className="w-6 h-6 text-brand-700" />
```

**5. Highlight-Backgrounds:**
```tsx
bg-brand-700/5   // Subtil (für Hover-States)
bg-brand-700/10  // Stärker (für Drag-States, Aktivierung)
```

**6. Nav-Link Hover:**
```tsx
hover:text-brand-700  // Frischer als brand-900
```

**WICHTIG:** brand-700 wird NICHT für Primary CTAs, Buttons oder Hauptüberschriften verwendet.
Diese bleiben bei brand-900 für maximale Seriosität und WCAG-Kontrast.

### Typografie

**Font:** Plus Jakarta Sans (via next/font/google)
- Gewichte: 300, 400, 500, 600, 700, 800
- Variable: `--font-jakarta`
- Body-Klasse: `font-sans` (mapped to Jakarta)

**Ligaturen sind DEAKTIVIERT** (Finance-Typografie erfordert maximale Lesbarkeit)

**Headline-Skalierung:**
| Element | letter-spacing | line-height |
|---------|---------------|-------------|
| h1      | -0.03em       | 1.1         |
| h2      | -0.025em      | 1.2         |
| h3      | -0.02em       | 1.25        |
| h4      | -0.015em      | 1.3         |
| h5/h6   | -0.01em       | 1.4         |
| Body/p  | -0.01em       | 1.7 / 1.75  |
| UI/Btns | 0.01em        | 1.2         |
| Small   | 0.015em       | 1.5         |

**Headline-Muster:**
```tsx
<h1 className="text-5xl md:text-7xl font-bold text-text-900 mb-8 leading-tight">
<h2 className="text-4xl md:text-5xl font-bold text-text-900 mb-6">
<h3 className="text-2xl font-bold text-text-900 mb-4">
```

**Body-Text-Muster:**
```tsx
<p className="text-xl text-text-900/70 leading-relaxed">
<p className="text-lg text-text-900/70 leading-relaxed">
<p className="text-text-900/70 leading-relaxed">
```

**Prose-Container (für längere Textblöcke):**
```tsx
<div className="prose prose-lg max-w-none text-text-900/70">
  <p>Langer Text...</p>
</div>
```

## LAYOUT-PRINZIPIEN
# ==================

### Container
```tsx
// Standard Content Container
<div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

// Zentrierter Text-Content
<div className="max-w-4xl mx-auto text-center">

// Schmaler Content (Formulare, FAQ)
<div className="max-w-3xl mx-auto">
```

### Hero Sections
Jede Seite beginnt mit einem Hero, der die volle Viewport-Höhe abzüglich der Navbar einnimmt.
**WICHTIG:** Verwende `min-h-` statt `h-` für Content, der auf Mobile ggf. länger als 100vh wird!

```tsx
<section className="relative overflow-hidden bg-gradient-to-br from-white via-surface-100/30 to-brand-700/8 min-h-[calc(100dvh-5rem)] flex flex-col justify-center py-12 sm:py-8">
  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
```

**Hinweis:** Der subtile `brand-700/8` Akzent im Gradient sorgt für Tiefe und Modernität, ohne aufdringlich zu sein.

**Mobile-First Typography im Hero:**
```tsx
// H1: text-3xl (30px) auf Mobile → max text-6xl (60px) auf lg
<h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-text-900 mb-6 sm:mb-8 leading-tight">

// Body Lead: text-base (16px) auf Mobile → max text-xl (20px) auf md+
<p className="text-base sm:text-lg md:text-xl text-text-900/70 leading-relaxed">

// Icon Boxes: Responsive sizing
<div className="w-16 h-16 sm:w-20 sm:h-20 ...">
  <Icon className="w-8 h-8 sm:w-10 sm:h-10 text-white" />
</div>
```

### Navbar (Responsive)
- Höhe: `h-20` (5rem)
- Position: `sticky top-0 z-50`
- Effekt: `.glass` (Glassmorphism, kein extra border-b nötig)
- **Desktop (lg+):** Links absolut zentriert (`absolute left-1/2 -translate-x-1/2`), CTA rechts
- **Tablet/Mobile (<lg):** Hamburger Menu mit Slide-in Panel (max-w-sm, von rechts)
- Touch-Targets: ≥44px (`w-11 h-11`)
- Accessibility: `aria-expanded`, `aria-controls`, `aria-modal`, Escape-Key, Scroll-Lock, **Focus Trap**
- Mobile Menu: Außerhalb `<nav>` gerendert für korrekten z-index (`z-[60]` Overlay, `z-[70]` Panel)

### Sections
```tsx
// Standard Section
<section className="py-24 bg-white">

// Gradient Section (abwechselnd, mit brand-700 Akzent)
<section className="py-24 bg-gradient-to-br from-surface-100/50 via-white to-brand-700/5">
```

### Footer
```tsx
<footer className="bg-gradient-to-br from-text-900 via-text-900/95 to-brand-900/80 text-white mt-24">
```

### Grid-Patterns
```tsx
// 3-Spalten Feature Grid
<div className="grid md:grid-cols-3 gap-12">

// 2-Spalten Grid
<div className="grid md:grid-cols-2 gap-8">

// Responsive Stacking
<div className="flex flex-col sm:flex-row gap-4 justify-center">
```

## KOMPONENTEN-PATTERNS
# =====================

### Buttons

**Primary Button:**
```tsx
<Link
  href="/einreichen"
  className="group bg-brand-900 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-brand-700 hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-300 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-focus-ring"
>
  Fall einreichen
  <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300" />
</Link>
```

**Secondary Button:**
```tsx
<Link
  href="/kontakt"
  className="group bg-white text-text-900 px-8 py-4 rounded-lg font-semibold text-lg border-2 border-border-subtle hover:border-brand-700/50 hover:shadow-lg hover:scale-105 active:scale-95 transition-all duration-300 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-focus-ring"
>
  Kontakt aufnehmen
  <ArrowRight className="w-5 h-5 text-neutral-500 group-hover:text-brand-700 group-hover:translate-x-1 transition-all duration-300" />
</Link>
```

**Navbar Button (kleiner):**
```tsx
<Link
  href="/einreichen"
  className="bg-brand-900 text-white px-6 py-3 rounded-lg font-semibold text-sm hover:bg-brand-700 hover:shadow-lg hover:scale-105 active:scale-95 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-focus-ring"
>
```

**Disabled State:**
```tsx
disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
```

### Cards

**Feature Card mit brand-700 Glow-Hover:**
```tsx
<div className="group bg-gradient-to-br from-white to-surface-100/50 border border-border-subtle rounded-2xl p-8 hover:shadow-2xl hover:scale-105 hover:border-brand-700/30 transition-all duration-300">
  <div className="w-16 h-16 bg-gradient-to-br from-brand-900 to-brand-700 rounded-xl flex items-center justify-center mb-6 group-hover:rotate-6 transition-transform duration-300">
    <Icon className="w-8 h-8 text-white" />
  </div>
  <h3 className="text-2xl font-bold text-text-900 mb-4">Titel</h3>
  <p className="text-text-900/70 leading-relaxed">Beschreibung</p>
</div>
```

**Feature Card mit standalone Icon (text-brand-700):**
```tsx
<div className="group bg-gradient-to-br from-white to-surface-100/50 border border-border-subtle rounded-2xl p-8 hover:shadow-xl hover:scale-105 hover:border-brand-700/30 transition-all duration-300">
  <Icon className="w-12 h-12 text-brand-700 mb-4 group-hover:scale-110 transition-transform duration-300" />
  <h3 className="text-lg sm:text-xl md:text-2xl font-bold text-text-900 mb-3">Titel</h3>
  <p className="text-text-900/70">Beschreibung</p>
</div>
```

**Large Content Card:**
```tsx
<div className="bg-white rounded-3xl p-8 md:p-12 shadow-lg hover:shadow-2xl transition-shadow duration-300">
```

**Accordion/Expandable Card:**
```tsx
<div className="bg-gradient-to-br from-white to-surface-100/50 border-2 border-border-subtle rounded-2xl overflow-hidden hover:shadow-lg hover:border-brand-700/30 transition-all duration-300">
```

### Icon Boxes
```tsx
// Feature Icon (groß)
<div className="w-20 h-20 bg-gradient-to-br from-brand-900 to-brand-700 rounded-2xl flex items-center justify-center">
  <Icon className="w-10 h-10 text-white" />
</div>

// Card Icon (medium)
<div className="w-16 h-16 bg-gradient-to-br from-brand-900 to-brand-700 rounded-xl flex items-center justify-center">
  <Icon className="w-8 h-8 text-white" />
</div>

// Timeline Dot
<div className="w-12 h-12 bg-brand-900 rounded-full flex items-center justify-center border-4 border-white shadow-lg">
  <span className="text-white font-bold">1</span>
</div>
```

### Form Inputs
```tsx
<input
  type="email"
  className="w-full px-4 py-3 bg-white border-2 border-border-subtle rounded-lg focus:border-brand-900 focus:ring-2 focus:ring-focus-ring outline-none transition-all duration-300"
  placeholder="ihre.email@beispiel.de"
/>

<textarea
  className="w-full px-4 py-3 bg-white border-2 border-border-subtle rounded-lg focus:border-brand-900 focus:ring-2 focus:ring-focus-ring outline-none transition-all duration-300 resize-none"
  rows={6}
/>

// Checkbox
<input
  type="checkbox"
  className="mt-1 w-5 h-5 text-brand-900 border-2 border-border-subtle rounded focus:ring-2 focus:ring-focus-ring transition-all duration-300"
/>
```

### Labels
```tsx
<label className="block text-sm font-semibold text-text-900 mb-2">
  Name des Ansprechpartners *
</label>

// Größeres Label
<label className="block text-lg font-semibold text-text-900 mb-3">
```

### Success/Error Messages
```tsx
// Success Alert (verwendet --success Token)
<div className="bg-success/10 border-2 border-success/30 rounded-2xl p-6 flex items-start gap-4">
  <CheckCircle className="w-6 h-6 text-success flex-shrink-0 mt-1" />
  <div>
    <h3 className="text-lg font-bold text-text-900 mb-1">Erfolgreich!</h3>
    <p className="text-text-900/70">Beschreibung</p>
  </div>
</div>

// Error Alert (verwendet --error Token)
<div className="bg-error/10 border-2 border-error/30 rounded-2xl p-6 flex items-start gap-4">
  <AlertCircle className="w-6 h-6 text-error flex-shrink-0 mt-1" />
  <div>
    <h3 className="text-lg font-bold text-text-900 mb-1">Fehler!</h3>
    <p className="text-text-900/70">Beschreibung</p>
  </div>
</div>
```

## ICONS
# ======

**Bibliothek:** lucide-react
**Import-Pattern:**
```tsx
import { ArrowRight, CheckCircle, Upload, Mail, Euro } from "lucide-react";
```

**Größen:**
- Inline mit Text: `w-5 h-5`
- In Buttons: `w-5 h-5`
- Feature Cards: `w-8 h-8` bis `w-12 h-12`
- Hero Icons: `w-10 h-10`

**Häufig verwendete Icons:**
- Navigation: `ArrowRight`
- Status: `CheckCircle`, `AlertCircle`
- Aktionen: `Upload`, `Send`, `FileText`, `X`
- Features: `Euro`, `Shield`, `Zap`, `Target`, `Clock`, `Users`
- Seiten: `Mail`, `HelpCircle`, `FileUp`
- Branchen: `Laptop`, `Wrench`, `Heart`, `MessageSquare`, `ShoppingCart`, `Hotel`, `Server`, `Cog`
- UI: `ChevronDown`

## TRANSITIONS & ANIMATIONEN
# ==========================

**Standard-Transition:**
```tsx
transition-all duration-300
```

**Hover-Effekte:**
```tsx
hover:shadow-lg hover:scale-105  // Buttons, Cards
hover:shadow-xl hover:scale-105  // Primary Buttons
hover:shadow-2xl hover:scale-105 // Large Cards
active:scale-95                  // Click feedback
```

**Icon-Animation:**
```tsx
group-hover:translate-x-1 transition-transform duration-300  // Arrow icons
group-hover:rotate-3 transition-all duration-300             // Feature icons
group-hover:rotate-6 transition-transform duration-300       // Card icons
```

**Accordion:**
```tsx
// Expand/Collapse
className={cn(
  "overflow-hidden transition-all duration-500",
  isOpen ? "max-h-[2000px] opacity-100" : "max-h-0 opacity-0"
)}

// Chevron rotation
className={cn(
  "w-6 h-6 text-brand-900 transition-transform duration-300",
  isOpen && "rotate-180"
)}
```

**Intersection Observer Animation:**
```tsx
// Fade-in on scroll (TrustSlider Pattern)
className={`transition-all duration-700 ease-out ${
  isVisible
    ? "opacity-100 translate-y-0"
    : "opacity-0 translate-y-8"
}`}
```

**Loading Spinner:**
```tsx
<div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" />
```

## ACCESSIBILITY
# ==============

### Sprache
- `<html lang="de">` ist gesetzt

### Fokus-Management
- Alle interaktiven Elemente haben: `focus:outline-none focus:ring-2 focus:ring-focus-ring`
- `focus-visible` Utility in globals.css definiert
- `scroll-smooth` auf html-Element

### Semantik
- Korrekte Heading-Hierarchie (h1 → h2 → h3)
- `<main>` Element für Hauptinhalt
- `<section>` für thematische Abschnitte
- `<nav>` für Navigation
- `<footer>` für Footer

### Formulare
- Labels mit `htmlFor` und korrespondierender `id`
- `required` Attribut auf Pflichtfeldern
- Visuelle Kennzeichnung: `*` nach Label-Text

### Links
- Externe Links haben `target="_blank"` mit `rel="noopener noreferrer"`

### Bilder
- `alt` Attribute auf allen Images

## CLIENT VS SERVER COMPONENTS
# ============================

### "use client" verwenden wenn:
- useState, useEffect, useRef oder andere Hooks
- Event Handler (onClick, onChange, etc.)
- Browser APIs (window, IntersectionObserver)
- Interaktive UI (Accordions, Forms, Modals)

### Aktuelle Client Components:
- `components/Navbar.tsx` (usePathname)
- `components/TrustSlider.tsx` (IntersectionObserver)
- `components/UploadForm.tsx` (useState, File handling)
- `components/ScrollToTop.tsx` (usePathname, useLayoutEffect)
- `app/kontakt/page.tsx` (Form state)
- `app/branchen/page.tsx` (Accordion state)
- `app/faq/page.tsx` (Accordion state)

### Server Components (default):
- Alle anderen Seiten und Komponenten
- Layout.tsx
- CTASection, Footer

## CODE-STIL & KONVENTIONEN
# =========================

### TypeScript
- Strict mode aktiviert
- Interfaces für Props definieren
- Readonly für Props: `Readonly<{ children: React.ReactNode }>`

### Imports
```tsx
// 1. React/Next imports
import { useState, useEffect } from "react";
import Link from "next/link";
import Image from "next/image";

// 2. Third-party imports
import { Icon1, Icon2 } from "lucide-react";

// 3. Local imports
import { cn } from "@/lib/utils";
import ComponentName from "@/components/ComponentName";
```

### cn() Utility
Für bedingte Klassen verwenden:
```tsx
import { cn } from "@/lib/utils";

className={cn(
  "base-classes",
  condition && "conditional-classes",
  anotherCondition ? "if-true" : "if-false"
)}
```

### Component Structure
```tsx
// Props Interface (wenn nötig)
interface ComponentProps {
  title: string;
  optional?: boolean;
}

// Component
export default function ComponentName({ title, optional = false }: ComponentProps) {
  // Hooks
  const [state, setState] = useState();
  
  // Handlers
  const handleClick = () => {};
  
  // Render
  return (
    <main>
      <section>...</section>
    </main>
  );
}
```

### Seiten-Struktur
Jede Seite folgt diesem Muster:
```tsx
export default function PageName() {
  return (
    <main>
      {/* Hero Section - Volle Höhe */}
      <section className="... h-[calc(100dvh-5rem)] ...">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="max-w-4xl mx-auto text-center">
            {/* Icon Box (optional) */}
            <h1>...</h1>
            <p>...</p>
          </div>
        </div>
      </section>

      {/* Content Sections */}
      <section className="py-24 bg-white">...</section>
      <section className="py-24 bg-gradient-to-br from-white to-surface-100">...</section>

      {/* CTA Section */}
      <CTASection
        title="..."
        subtitle="..."
        buttons={[
          { text: "Kontakt aufnehmen", href: "/kontakt" },
          { text: "Häufig gestellte Fragen", href: "/faq" },
          { text: "Fall einreichen", href: "/einreichen", primary: true },
        ]}
      />
    </main>
  );
}
```

## MOBILE-RESPONSIVE GUIDELINES
# ==============================

### Globaler Overflow-Schutz
In `globals.css` ist `overflow-x: hidden` auf `html` und `body` gesetzt.
Dies verhindert horizontales Scrolling auf allen Viewports.

### Breakpoint-System (Tailwind Defaults)
| Breakpoint | Width   | Typisches Gerät        |
|------------|---------|------------------------|
| (base)     | < 640px | Mobile                 |
| sm         | 640px+  | Tablet Portrait        |
| md         | 768px+  | Tablet Landscape       |
| lg         | 1024px+ | Desktop                |
| xl         | 1280px+ | Large Desktop          |

### Responsive Typography Scale (Mobile-First)
**WICHTIG:** Mobile-Schriften MÜSSEN kleiner sein als Desktop für optimale Lesbarkeit!

| Element | Mobile (base) | sm (640px+) | md (768px+) | lg (1024px+) |
|---------|---------------|-------------|-------------|--------------|
| H1 Hero | `text-3xl` (30px) | `text-4xl` | `text-5xl` | `text-6xl` |
| H2 Section | `text-2xl` (24px) | `text-3xl` | `text-4xl` | `text-5xl` |
| H3 Card | `text-lg` (18px) | `text-xl` | `text-2xl` | – |
| H4 Sub | `text-base` (16px) | `text-lg` | – | – |
| Body Lead | `text-base` (16px) | `text-lg` | `text-xl` | – |
| Body | `text-base` (16px) | – | – | – |

```tsx
// H1 Hero
<h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold">

// H2 Section
<h2 className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold">

// H3 Card
<h3 className="text-lg sm:text-xl md:text-2xl font-bold">

// Body Lead
<p className="text-base sm:text-lg md:text-xl text-text-900/70">

// Body Standard (16px auf allen Viewports)
<p className="text-base text-text-900/70">
```

### Spacing auf Mobile
- Buttons: `px-6 sm:px-8 py-3 sm:py-4`
- Margins: `mb-6 sm:mb-8` statt fixer Werte
- Padding in Sections: `py-12 sm:py-8` (mehr Padding auf Mobile für Breathing Room)

### Container-Anpassung
Immer `w-full` zum Container hinzufügen um Overflow zu verhindern:
```tsx
<div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
```

### Hero Height auf Mobile
`min-h-[calc(100dvh-5rem)]` statt `h-[calc(100dvh-5rem)]`
→ Erlaubt Content zu wachsen wenn nötig

### Touch Targets
Minimale Touch-Größe: 44x44px (`w-11 h-11`)
Gilt für: Buttons, Links, Hamburger Menu, Checkboxes

## PERFORMANCE
# ============

### Images
- Immer `next/image` verwenden
- `width` und `height` oder `fill` angeben
- `priority` für Above-the-fold Images

### Fonts
- Via `next/font/google` laden (automatisches Optimierung)
- Font Variable in className verwenden

### Client-Side
- IntersectionObserver für Scroll-Animationen
- `disconnect()` nach einmaliger Animation
- SSR-safe Hooks: `useIsomorphicLayoutEffect`

## GLASSMORPHISM
# ==============

```css
.glass {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid var(--white);
}

.glass-dark {
  background: rgba(19, 17, 31, 0.75);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
```

Aktuell verwendet: Navbar

## WIEDERVERWENDBARE KOMPONENTEN
# ==============================

### CTASection
```tsx
<CTASection
  title="Titel"
  subtitle="Optionaler Untertitel"
  buttons={[
    { text: "Button Text", href: "/pfad" },
    { text: "Primary Button", href: "/pfad", primary: true },
  ]}
/>
```

### TrustSlider
Zeigt Partner-Logos mit Fade-in Animation.

### UploadForm
Vollständiges Drag-&-Drop Upload-Formular mit Supabase-Integration.

### ScrollToTop
Automatischer Scroll-Reset bei Client-Navigation.

### Navbar / Footer
In Layout eingebunden, nicht manuell verwenden.

### Providers (components/Providers.tsx)
Client-side Provider-Wrapper für Context (ToastProvider etc.).
Im Root Layout eingebunden – nicht manuell verwenden.

### Skeleton (Loading States)
```tsx
import { Skeleton, SkeletonCard, SkeletonText, SkeletonButton } from "@/components/Skeleton";

// Basis-Skeleton (flexibel)
<Skeleton className="h-4 w-full" />           // Text-Zeile
<Skeleton className="h-12 w-12 rounded-xl" /> // Icon Box
<Skeleton className="h-48 w-full rounded-2xl" /> // Card

// Vorgefertigte Varianten
<SkeletonCard />                    // Feature Card Platzhalter
<SkeletonText lines={3} />          // Mehrere Text-Zeilen
<SkeletonButton size="default" />   // Button Platzhalter
```

### Loading (app/loading.tsx)
Automatischer Loading-State für Seiten-Transitions mit zentriertem Spinner.

### FormError (Inline Validation)
```tsx
import { FormError, FormErrorSummary } from "@/components/FormError";

// Einzelner Feld-Fehler (unter dem Input)
<FormError message={errors.email} />

// Fehler-Zusammenfassung (oben im Formular)
<FormErrorSummary errors={["Fehler 1", "Fehler 2"]} />
```

**Pattern für Formular-Validation:**
```tsx
interface FormErrors {
  email?: string;
  // ... weitere Felder
}

const [errors, setErrors] = useState<FormErrors>({});

const clearError = (field: keyof FormErrors) => {
  setErrors((prev) => ({ ...prev, [field]: undefined }));
};

const validateForm = (): FormErrors => {
  const newErrors: FormErrors = {};
  if (!email) newErrors.email = "Bitte geben Sie Ihre E-Mail ein.";
  return newErrors;
};

// Im Submit-Handler:
const validationErrors = validateForm();
setErrors(validationErrors);
if (Object.keys(validationErrors).length > 0) return;

// Input mit Error-State:
<input
  className={`... ${errors.email ? "border-error" : "border-border-subtle"}`}
  onChange={(e) => { setValue(e.target.value); clearError("email"); }}
/>
<FormError message={errors.email} />
```

### Toast Notifications (components/Toast.tsx)
```tsx
import { useToast } from "@/components/Toast";

const toast = useToast();

// Success Toast
toast.success("Erfolgreich!", "Ihre Daten wurden gespeichert.");

// Error Toast mit optionaler Retry-Action
toast.error(
  "Upload fehlgeschlagen",
  "Bitte versuchen Sie es erneut.",
  {
    label: "Erneut versuchen",
    onClick: () => handleRetry(),
  }
);

// Info Toast
toast.info("Hinweis", "Die Verarbeitung läuft...");
```

**Toast-Typen:** `success`, `error`, `info`, `warning`
**Auto-Dismiss:** Success/Info: 5s, Error: 8s

### Error Handling (lib/errors.ts)
```tsx
import { analyzeError, logError, withRetry, getSupportMessage } from "@/lib/errors";

// Fehler analysieren (user-freundliche Meldung)
const errorDetails = analyzeError(error);
// errorDetails.userMessage  - Für UI (sicher, keine technischen Details)
// errorDetails.isRetryable  - Soll Retry angeboten werden?
// errorDetails.code         - Interner Fehlercode

// Strukturiertes Logging (server-side only)
logError("UploadForm", error, { fileId: "123" });

// Retry-Wrapper mit exponential backoff
const result = await withRetry(
  async () => await supabase.storage.upload(...),
  {
    maxAttempts: 3,
    baseDelay: 1000,
    onRetry: (attempt, errorDetails) => {
      toast.info(`Versuch ${attempt}/3...`);
    },
  }
);

// Support-Nachricht
getSupportMessage(); // "...kontaktieren Sie uns unter service@notafinance.de"
```

**Best Practices:**
- Niemals rohe Fehlermeldungen an den User
- `logError()` für alle Fehler (DSGVO-konform)
- `withRetry()` für alle externen API-Calls
- Toast für User-Feedback, nicht console.error

# ============================================
# BEKANNTE TODOS
# ============================================

1. **OpenGraph-Bild ersetzen**
   - `app/opengraph-image.tsx` generiert aktuell ein dynamisches Bild
   - Für bessere Performance: Durch statisches Bild `/public/og-image.png` (1200×630px) ersetzen
   - Dann `opengraph-image.tsx` löschen und in `layout.tsx` referenzieren

# ============================================
# OPTIONALE VERBESSERUNGSVORSCHLÄGE
# ============================================

Diese Vorschläge sind NICHT im aktuellen Code implementiert:

1. **Animation Library**
   - Framer Motion für komplexere Animationen
   - Staggered Animations
   # decision: postponed for now, no value add in fintech

2. **Dark Mode**
   - Design Tokens sind vorbereitet
   - Implementation fehlt 
   # decision: postponed for now, no value add in fintech

3. **i18n**
   - Aktuell hardcoded Deutsch
   - Next-intl für Mehrsprachigkeit
   # decision: postponed, Markt ist DE

4. **Testing**
   - Keine Tests vorhanden
   - Jest + React Testing Library empfohlen
   # postponed, erst wenn Website/UI fertig

5. **Error Tracking Service**
   - Sentry Integration für Production
   - logError() ist bereits vorbereitet für Sentry-Anbindung
   # decision: sobald website final und kurz vor go-live ist

6. **Mobile NavBar**
   - ✅ GELÖST: CTA Button mit Zeilenumbruch ("Fall/einreichen") ist auf Mobile sichtbar
   - Brand Name ebenfalls mit Zeilenumbruch ("Nota/Finance") für kompaktes Layout
